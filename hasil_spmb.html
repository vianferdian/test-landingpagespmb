<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Pengumuman Hasil SPMB 2026 | SMKN 1 Cirebon</title>

<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">

<script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>

<style>

*{
margin:0;
padding:0;
box-sizing:border-box;
font-family:'Poppins',sans-serif;
}

body{
background:linear-gradient(135deg,#0f2027,#203a43,#2c5364);
min-height:100vh;
display:flex;
align-items:center;
justify-content:center;
color:white;
}

/* CARD */

.card{
width:95%;
max-width:750px;
background:white;
color:#333;
padding:40px;
border-radius:20px;
text-align:center;
box-shadow:0 20px 60px rgba(0,0,0,.4);
animation:fadeUp 1s ease;
}

h1{
margin-bottom:10px;
}

.search-box{
margin-top:30px;
display:flex;
gap:10px;
}

input{
flex:1;
padding:14px;
border-radius:12px;
border:1px solid #ccc;
font-size:16px;
}

button{
padding:14px 20px;
border:none;
border-radius:12px;
background:#1e88e5;
color:white;
font-weight:600;
cursor:pointer;
transition:.3s;
}

button:hover{
background:#1565c0;
}

.result{
margin-top:30px;
animation:fadeUp .6s ease;
}

.success{
background:#f1fff5;
border:2px solid #22c55e;
padding:25px;
border-radius:16px;
}

.fail{
background:#fff5f5;
border:2px solid #ef4444;
padding:25px;
border-radius:16px;
}

/* LOCK SCREEN */

.lock{
position:fixed;
inset:0;
background:#0f2027;
display:flex;
flex-direction:column;
align-items:center;
justify-content:center;
text-align:center;
z-index:999;
}

.lock h1{
font-size:32px;
margin-bottom:10px;
}

.fade{
animation:fadeUp .8s ease;
}

@keyframes fadeUp{
from{
opacity:0;
transform:translateY(20px);
}
to{
opacity:1;
transform:translateY(0);
}
}

</style>
</head>
<body>

<!-- LOCK SCREEN -->
<div id="lockScreen" class="lock">
<h1>üîí Pengumuman Belum Dibuka</h1>
<p>Hasil seleksi dapat diakses pada:</p>
<h2 id="countdown"></h2>
</div>

<div class="card">

<h1>PENGUMUMAN HASIL SPMB</h1>
<p>SMK Negeri 1 Cirebon<br>Tahun Ajaran 2026/2027</p>

<div class="search-box">
<input 
type="text"
id="searchInput"
placeholder="Masukkan Nomor Pendaftaran..."
onkeypress="if(event.key==='Enter')searchData()"
>
<button onclick="searchData()">Cek</button>
</div>

<div id="resultBox" class="result"></div>

</div>

<!-- AUDIO -->
<audio id="successSound">
<source src="https://assets.mixkit.co/sfx/preview/mixkit-achievement-bell-600.mp3">
</audio>

<script>

/* ===============================
SET JAM PENGUMUMAN DI SINI
================================= */

const releaseDate = new Date("February 03, 2026 10:00:00").getTime();

/* ================================= */

const lockScreen = document.getElementById("lockScreen");
const countdown = document.getElementById("countdown");

setInterval(()=>{

const now = new Date().getTime();
const distance = releaseDate - now;

if(distance <= 0){

lockScreen.style.display="none";
return;
}

const d = Math.floor(distance/(1000*60*60*24));
const h = Math.floor((distance%(1000*60*60*24))/(1000*60*60));
const m = Math.floor((distance%(1000*60*60))/(1000*60));

countdown.innerHTML = `${d} Hari ${h} Jam ${m} Menit`;

},1000);


/* ===============================
GOOGLE SHEET
================================= */

const sheetURL = "MASUKKAN CSV GOOGLE SHEET";

let sheetData=[];

fetch(sheetURL)
.then(res=>res.text())
.then(csv=>{

const rows = csv.split("\n").slice(1);

sheetData = rows.map(row=>{
const cols=row.split(",");

return{
registration_number:cols[0]?.replace(/"/g,'').trim(),
student_name:cols[1]?.replace(/"/g,'').trim(),
major:cols[2]?.replace(/"/g,'').trim(),
registration_path:cols[3]?.replace(/"/g,'').trim(),
status:cols[4]?.replace(/"/g,'').trim(),
registration_schedule:cols[5]?.replace(/"/g,'').trim(),
school_name:cols[6]?.replace(/"/g,'').trim(),
}

});

});


/* ===============================
SEARCH
================================= */

let clicked=false;

function searchData(){

if(clicked) return;
clicked=true;
setTimeout(()=>clicked=false,2000);

const input=document.getElementById("searchInput").value.trim();
const resultBox=document.getElementById("resultBox");

const student=sheetData.find(
s=>s.registration_number===input
);

if(!student){

resultBox.innerHTML=`
<div class="fail fade">
<h2>Data tidak ditemukan</h2>
<p>Periksa kembali nomor pendaftaran Anda.</p>
</div>
`;
return;
}

const isAccepted=student.status.toLowerCase().includes("diterima") 
|| student.status.toLowerCase().includes("lulus");

if(isAccepted){

/* CONFETTI */
confetti({
particleCount:150,
spread:120,
origin:{y:.6}
});

/* SOUND */
document.getElementById("successSound").play();

resultBox.innerHTML=`

<div class="success fade">

<h2>‚ú® SELAMAT ATAS KEBERHASILAN ANDA ‚ú®</h2>

<h1 style="margin:10px 0;">
${student.student_name}
</h1>

<p><b>DINYATAKAN ${student.status.toUpperCase()}</b></p>

<hr style="margin:20px 0;">

<p><b>Program Keahlian:</b><br>${student.major}</p>
<p><b>Jalur:</b><br>${student.registration_path}</p>

<p style="margin-top:15px;">
üóìÔ∏è <b>Daftar Ulang:</b><br>
${student.registration_schedule}
</p>

<button onclick="window.print()" 
style="margin-top:20px;background:#22c55e;">
Download / Print Bukti Kelulusan
</button>

</div>
`;

}else{

resultBox.innerHTML=`

<div class="fail fade">

<h2>Terima Kasih</h2>

<h3>${student.student_name}</h3>

<p>Anda belum dinyatakan diterima di
<b>${student.school_name}</b>.</p>

<p>Tetap semangat ‚Äî masa depan cerah menanti Anda.</p>

</div>
`;

}

}

</script>

</body>
</html>
